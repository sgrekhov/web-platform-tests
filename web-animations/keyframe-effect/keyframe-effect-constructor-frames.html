<!DOCTYPE html>
<meta charset=utf-8>
<title>KeyframeEffect constructor frames parameter test</title>
<meta name="assert" content="A Keyframe object or sequence of Keyframe objects used for calculating animation values for this animation effect">
<link rel="help" href="http://w3c.github.io/web-animations/#the-keyframeeffect-interface">
<link rel="author" title="Sergey G. Grekhov" href="mailto:sgrekhov@unipro.ru">
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<script src="../testcommon.js"></script>
<link rel="stylesheet" href="/resources/testharness.css">
<body>
<div id="log"></div>
<script>
// In the tests below we don't test normalizing of a keyframe sequence
// Normalizing tests can be found in keyframe-effect/keyframe-effect-normalizing-keyframes.html

test(function() {
    var effect = new KeyframeEffect({top: '10px'});

    testKeyframe(effect.getFrames[0], {
        top: '10px',
        offset: null,
        easing: 'linear',
        composite: null
    }, 'Created keyframe instance should have default propeties', 1);
}, 'Test that KeyframeEffect constructor creates KeyframeEffect instance ' +
    'with a single Keyframe and default properties');

test(function() {
    var keyframe = {top: '10px',
        offset: 0.5,
        easing: 'ease',
        composite: 'add'};
    var effect = new KeyframeEffect(keyframe);

    testKeyframe(effect.getFrames[0], keyframe,
        'Created keyframe instance should have propeties set by constructor', 1);
}, 'Test that KeyframeEffect constructor creates KeyframeEffect instance ' +
    'with a single Keyframe and properties set by the constructor');

test(function() {
    var keyframes = [{top: '10px', offset: 0.1}, {top: '20px', offset: 0.2}];
    var effect = new KeyframeEffect(keyframes);

    testKeyframe(effect.getFrames[0], {top: '10px',
        offset: 0.1,
        easing: 'linear',
        composite: null}, 'Keyframe 0', 0.1);
    testKeyframe(effect.getFrames[1], {top: '20px',
        offset: 0.2,
        easing: 'linear',
        composite: null}, 'Keyframe 1', 0.1);
}, 'Test that KeyframeEffect constructor creates KeyframeEffect instance ' +
    'with the keyframes sequence with properties values specified by the constructor ' +
    'or default if they were not specified');

test(function() {
    var keyframes = [{top: '10px', offset: 0.1, easing: 'ease', composite: 'add'},
        {top: '20px', offset: 0.2, easing: 'ease-in', composite: 'replace'}];
    var effect = new KeyframeEffect(keyframes);

    testKeyframe(effect.getFrames[0], keyframes[0], 'Keyframe 0', 0.1);
    testKeyframe(effect.getFrames[1], keyframes[1], 'Keyframe 1', 0.2);
}, 'Test that KeyframeEffect constructor creates KeyframeEffect instance ' +
    'with the keyframes sequence with properties values specified by the constructor');

test(function() {
    var keyframes = [{top: '10px', offset: 0.3, easing: 'ease', composite: 'add'},
        {top: '20px', offset: 0.2, easing: 'ease-in', composite: 'replace'}];
    var effect = new KeyframeEffect(keyframes);

    testKeyframe(effect.getFrames[0], keyframes[1], 'Keyframe 0', 0.2);
    testKeyframe(effect.getFrames[1], keyframes[0], 'Keyframe 1', 0.3);
}, 'Test that KeyframeEffect constructor creates KeyframeEffect instance ' +
    'with the normalized keyframes sequence with properties values ' +
    'specified by the constructor');
</script>
</body>
